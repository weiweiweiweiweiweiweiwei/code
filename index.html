<!DOCTYPE html>
<html lang="zh-Hant">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project Synapse - 互動式前端學習平台</title>
    <meta name="description" content="一個透過互動式挑戰來學習基礎 HTML 與 CSS 的網頁程式碼教學平台。">
    
    <!-- Favicon and Fonts -->
    <link rel="icon" href="https://raw.githubusercontent.com/weiweiweiweiweiweiweiwei/code/35ca6cf11ff496626a4b940b2cb6ceba9fde2027/cloud-svgrepo-com.svg" type="image/x-icon">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&family=Fira+Code:wght@400;500&family=Noto+Serif+TC:wght@400;600&display=swap" rel="stylesheet">
    
    <!-- CodeMirror Assets -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.15/codemirror.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.15/theme/material-darker.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.15/theme/neat.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.15/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.15/mode/xml/xml.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.15/mode/css/css.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.15/mode/htmlmixed/htmlmixed.min.js"></script>

    <!-- External CSS -->
    <link rel="stylesheet" href="style.css">
    
    <!-- External JavaScript with defer -->
    <script src="https://unpkg.com/split.js/dist/split.min.js"></script>
    <script src="script.js" defer></script>
</head>

<body>
    <div id="app-container">
        <!-- Main Menu View -->
        <div id="main-menu" class="view is-active">
            <h1>Project Synapse</h1>
            <p>互動式前端程式碼學習平台</p>
            <div class="unit-selection">
                <div class="unit-card-container">
                    <button class="unit-card" data-unit-key="HTML">
                        <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="#E34F26" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M8 6l-4 6 4 6" /><path d="M16 6l4 6-4 6" />
                        </svg>
                        <h2>基礎 HTML</h2>
                    </button>
                    <button class="reset-progress-btn" data-unit-key="HTML" aria-label="重設 HTML 進度">
                        <svg viewBox="0 0 24 24"><path fill="currentColor" d="M12,4A8,8 0 0,0 4,12H1L4.89,15.89L4.96,16.03L9,12H6A6,6 0 0,1 12,6A6,6 0 0,1 18,12A6,6 0 0,1 12,18C10.67,18 9.5,17.39 8.69,16.4L7.28,17.8C8.5,19.19 10.16,20 12,20A8,8 0 0,0 20,12A8,8 0 0,0 12,4Z" /></svg>
                    </button>
                </div>
                <div class="unit-card-container">
                    <button class="unit-card" data-unit-key="CSS">
                        <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="#1572B6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                           <path d="M7 10l5 5 5-5" /> <path d="M7 15l5-5 5 5" />
                        </svg>
                        <h2>基礎 CSS</h2>
                    </button>
                    <button class="reset-progress-btn" data-unit-key="CSS" aria-label="重設 CSS 進度">
                        <svg viewBox="0 0 24 24"><path fill="currentColor" d="M12,4A8,8 0 0,0 4,12H1L4.89,15.89L4.96,16.03L9,12H6A6,6 0 0,1 12,6A6,6 0 0,1 18,12A6,6 0 0,1 12,18C10.67,18 9.5,17.39 8.69,16.4L7.28,17.8C8.5,19.19 10.16,20 12,20A8,8 0 0,0 20,12A8,8 0 0,0 12,4Z" /></svg>
                    </button>
                </div>
                <div class="unit-card-container">
                    <button class="unit-card" id="start-quiz-btn">
                        <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 32 32" version="1.1">
                            <path fill="currentColor" d="M21.652 3.098h-16.955v26.375h22.607v-20.723l-5.652-5.652zM25.42 27.589h-18.839v-22.607h13.188l5.652 5.652v16.955zM12.269 11.851l-3.644 4.434 3.644 4.434 0.862-1.417-2.455-3.017 2.455-3.017zM13.863 20.614h1.599l2.542-8.681h-1.599zM19.731 11.851l-0.862 1.418 2.455 3.017-2.455 3.017 0.862 1.418 3.644-4.434z"/>
                        </svg>
                        <h2>總測驗</h2>
                    </button>
                </div>
            </div>
        </div>

        <!-- Learn View -->
        <main id="learn-view" class="view">
            <nav id="top-navbar">
                <a href="#" id="home-link" aria-label="返回主選單">
                    <svg viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
                    <h2 id="navbar-title"></h2>
                </a>
                <div class="navbar-spacer"></div>
                 <!-- Settings Button and Dropdown -->
                <div class="settings-container">
                    <button id="settings-btn" class="icon-btn" aria-label="設定">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="currentColor" d="M19.14,12.94c0.04-0.3,0.06-0.61,0.06-0.94c0-0.32-0.02-0.64-0.07-0.94l2.03-1.58c0.18-0.14,0.23-0.41,0.12-0.61 l-1.92-3.32c-0.12-0.22-0.37-0.29-0.59-0.22l-2.39,0.96c-0.5-0.38-1.03-0.7-1.62-0.94L14.4,2.81c-0.04-0.24-0.24-0.41-0.48-0.41 h-3.84c-0.24,0-0.44,0.17-0.48,0.41L9.2,5.15C8.61,5.39,8.08,5.71,7.58,6.09L5.19,5.13C4.97,5.06,4.72,5.13,4.6,5.33L2.68,8.65 c-0.11,0.2-0.06,0.47,0.12,0.61l2.03,1.58C4.78,11.36,4.76,11.67,4.76,12s0.02,0.64,0.07,0.94l-2.03,1.58 c-0.18,0.14-0.23,0.41-0.12,0.61l1.92,3.32c0.12,0.22,0.37,0.29,0.59,0.22l2.39-0.96c0.5,0.38,1.03,0.7,1.62,0.94l0.36,2.34 c0.04,0.24,0.24,0.41,0.48,0.41h3.84c0.24,0,0.44-0.17,0.48-0.41l0.36-2.34c0.59-0.24,1.12-0.56,1.62-0.94l2.39,0.96 c0.22,0.07,0.47,0,0.59-0.22l1.92-3.32c0.12-0.2,0.07-0.47-0.12-0.61L19.14,12.94z M12,15.6c-1.98,0-3.6-1.62-3.6-3.6 s1.62-3.6,3.6-3.6s3.6,1.62,3.6,3.6S13.98,15.6,12,15.6z"></path></svg>
                    </button>
                    <div id="settings-dropdown" class="dropdown-menu hidden">
                        <div class="dropdown-header">外觀</div>
                        <button class="dropdown-item" data-theme="light">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12a4 4 0 1 0 8 0a4 4 0 1 0-8 0m-5 0h1m8-9v1m8 8h1m-9 8v1M5.6 5.6l.7.7m12.1-.7l-.7.7m0 11.4l.7.7m-12.1-.7l-.7.7"></path></svg>
                            淺色模式
                        </button>
                        <button class="dropdown-item" data-theme="dark">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" role="img" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" aria-labelledby="moonIconTitle" stroke-width="2" stroke-linecap="square" stroke-linejoin="miter" fill="none" webcrx=""> <title id="moonIconTitle">Moon</title> <path d="M10.423839,3 C10.1490474,3.80837289 10,4.67486099 10,5.57616098 C10,9.99443898 13.581722,13.576161 18,13.576161 C18.9013,13.576161 19.7677881,13.4271135 20.576161,13.152322 C19.5038921,16.3066875 16.516978,18.576161 13,18.576161 C8.581722,18.576161 5,14.994439 5,10.576161 C5,7.05918297 7.26947343,4.07226889 10.423839,3 Z"/> </svg>
                            深色模式
                        </button>
                        <button class="dropdown-item" data-theme="system">
                             <svg width="256px" height="256px" viewBox="0 0 15.00 15.00" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1   " transform="matrix(-1, 0, 0, 1, 0, 0)rotate(0)"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="m2 13.2H13M0.5 2.5L0.5 10.5C0.5 11.0523 0.947716 11.5 1.5 11.5L13.5 11.5C14.0523 11.5 14.5 11.0523 14.5 10.5V2.5C14.5 1.94772 14.0523 1.5 13.5 1.5L1.5 1.5C0.947716 1.5 0.5 1.94772 0.5 2.5Z"></path> </g></svg>
                            裝置
                        </button>
                    </div>
                </div>
            </nav>
            <div id="panels-container">
                <div id="codex-panel" class="panel">
                    <div class="panel-header">
                        <h3 id="unit-title-header">目錄</h3>
                        <button class="collapse-btn" id="collapse-codex" aria-label="收合課程面板">
                            <svg viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z" /></svg>
                        </button>
                    </div>
                    <div class="panel-content">
                        <div class="progress-container">
                            <div class="progress-text"><span>進度</span><span id="progress-percentage">0%</span></div>
                            <div class="progress-bar-bg"><div id="progress-bar-fg" class="progress-bar-fg"></div></div>
                        </div>
                        <ul id="lesson-list" class="lesson-list"></ul>
                    </div>
                </div>
                <div id="insight-panel" class="panel">
                    <div class="panel-header insight-tabs">
                        <button id="tab-insight" class="tab-btn active">教學</button>
                        <button id="tab-challenge" class="tab-btn">挑戰</button>
                    </div>
                    <div class="panel-content">
                        <div id="insight-content-tab" class="tab-content">
                            <div id="lesson-scrollable-content">
                                <h3 id="lesson-title"></h3>
                                <div id="lesson-insight"></div>
                                <div id="command-buttons"></div>
                            </div>
                            <button id="go-to-challenge-btn" class="btn">來點挑戰吧</button>
                        </div>
                        <div id="challenge-content-tab" class="tab-content hidden">
                            <div id="lesson-challenge-area"></div>
                        </div>
                    </div>
                </div>
                <div id="playground-panel" class="panel">
                    <div class="panel-header"><h3>範例</h3></div>
                    <div class="panel-content" style="padding:0;">
                        <div id="css-playground" class="hidden"><div id="visual-box">Box</div></div>
                        <!-- THIS IS NOW AN IFRAME FOR SECURITY AND LIVE PREVIEW -->
                        <iframe id="html-sandbox" class="hidden"></iframe>
                    </div>
                </div>
            </div>
        </main>

        <!-- Quiz View -->
        <main id="quiz-page-container" class="view">
            <div class="page-container">
                <header class="quiz-header">
                    <div>
                        <h1>HTML & CSS 總測驗</h1>
                        <p id="quiz-progress">題目 1 / 10</p>
                    </div>
                    <button id="quiz-home-btn" class="btn secondary" aria-label="返回主選單">返回</button>
                </header>
                <main id="quiz-view">
                    <div id="question-area-wrapper">
                        <h2 id="question-prompt"></h2>
                        <div id="question-body"></div>
                        <div id="question-feedback-area" class="hidden"></div>
                    </div>
                    <nav class="quiz-navigation">
                        <button id="prev-btn" class="btn secondary">上一題</button>
                        <button id="next-btn" class="btn">下一題</button>
                    </nav>
                </main>
                <main id="results-view" class="hidden">
                    <div id="final-score-circle"><span class="score-text" id="final-score-text"></span><span class="score-label">得分</span></div>
                    <h2 id="results-summary-title"></h2>
                    <p id="results-summary-text"></p>
                    <nav class="quiz-navigation">
                        <button id="review-btn" class="btn secondary">查看詳解</button>
                        <button id="retry-btn" class="btn">再試一次</button>
                    </nav>
                </main>
            </div>
        </main>
    </div>
</body>
</html>
